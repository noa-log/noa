# 设置写入编码器
Noa 支持设置自定义的写入编码器，可以通过配置日志实例的 `Writer.Encoder` 配置项来实现。默认情况下，Noa 使用自带Text编码器。

## 更换为JSON编码器
Noa 官方提供了一个 JSON 编码器实现，你可以通过以下方式导入并使用：

### 安装
```bash
go get -u github.com/noa-log/noa-encoder-json
```

```go
package main

import (
    "errors"
    "github.com/noa-log/noa"
    noaencoderjson "github.com/noa-log/noa-encoder-json"
)

func main() {
    // 创建一个新的日志实例
    logger := noa.NewLog()
    // 设置编码器为 JSON 编码器
    logger.Writer.Encoder = noaencoderjson.NewJSONEncoder(logger)

    // 记录日志
    logger.Info("Test", "This is an info message")
    logger.Error("Test", errors.New("an example error"))
}
```

## 编写自定义编码器
如果你希望编写自己的编码器，可以通过实现`github.com/noa-log/noa/file/encoder`包的 `encoder.Encoder` 接口来完成。以下是一个简单的自定义编码器示例：
```go
package main

import (
	"fmt"
	"os"
	"github.com/noa-log/noa"
	"github.com/noa-log/noa/tools"
    "github.com/noa-log/noa/tools/output"
)

type MyCustomEncoder struct {
	logger *noa.LogConfig
}

// 创建一个新的自定义编码器
func NewMyCustomEncoder(logger *noa.LogConfig) *MyCustomEncoder {
	return &MyCustomEncoder{
		logger: logger,
	}
}

// 实现文件扩展名获取方法
func (mce *MyCustomEncoder) FileExtension() string {
	return ".log"
}

// 实现写入方法
func (mce *MyCustomEncoder) Write(FileHandle *os.File, PrintData []any) error {
    // 使用`output.UnwrapPrintData`工具方法来解析`PrintData`数据以获取时间，等级，来源等信息
	time, level, source, printData := output.UnwrapPrintData(mce.logger, PrintData)

	if _, err := fmt.Fprint(FileHandle, tools.PadSpaceArray([]any{time, level, source, printData})...); err != nil {
		return err
	}

	return nil
}

func main() {
	// 创建一个新的日志实例
	logger := noa.NewLog()
	// 设置自定义编码器
	logger.Writer.Encoder = NewMyCustomEncoder(logger)

	// 记录日志
	logger.Info("Test", "This is an info message")
}
```